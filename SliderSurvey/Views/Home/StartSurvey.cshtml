@model List<string>

@{
    ViewBag.Title = "StartSurvey";
}
<link href="~/Content/SliderStuff.css" rel="stylesheet" />
<script type="text/javascript">
    $(function () {
        // Todo: can this be moved out so it isn't as magic stringy?
        var sliderValues = {
            0: "Very Important",
            50: "Somewhat Important",
            100: "Not Important"
        };

        $('.slider').each(function (index, element) {
            var amountName = element.id.replace('Slider', '') + 'Amount';
            $('#' + element.id).slider({
                value: 50,
                min: 0,
                max: 100,
                step: 50,
                slide: function (event, ui) {
                    $('#' + amountName).val(sliderValues[ui.value]);
                }
            });
        });

        // This is here so that the initial value is populated. Otherwise the label shows
        // nothing until the user interacts with the slider in some fashion.
        $('.amount').each(function (index, element) {
            var sliderName = element.id.replace('Amount', '') + 'Slider';
            $('#' + element.id).val(sliderValues[$('#' + sliderName).slider("value")]);
        });

        // Grab the key/value pairs for all the sliders and serialize the results
        $('#MainSubmitButton').click(function (event) {
            debugger;
            event.preventDefault();
            var result = new Array();
            $('.amount').each(function (index, element) {
                var dict = new Object();
                dict.key = element.id.replace('Amount', '');
                dict.value = $('#' + element.id).val();
                result[index] = dict;
            });
            var serializedData = JSON.stringify(result);
            alert(serializedData);
        });
    });


</script>


<h2>Start Survey</h2>

<form id="mainForm" action="/" method="post">
    @foreach (var name in @Model) {
        var textboxName = name + "Amount";
        var sliderName = name + "Slider";
        <span class="firstcolumn">
            <label>@name:</label>
        </span>
        <span class="secondcolumn">
            <input type="text" id="@textboxName" class="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
        </span>
        <div class="sliderwrapper">
            <div id="@sliderName" class="slider"></div>
        </div>
        <br />
    }

    <button id="MainSubmitButton">Click Me</button>
</form>

